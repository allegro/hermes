<section ng-controller="GroupsController">

    <ol class="breadcrumb">
        <li><a href="#/">home</a></li>
        <li class="active">groups</li>
    </ol>

    <h1>Groups</h1>

    <div ng-show="!canCreateGroup()" class="alert alert-info">In order to create a new group, please contact Hermes administrator</div>

    <div class="row container">
        <div class="input-group col-md-2 col-md-offset-10">
            <div class="input-group-addon"><span class="glyphicon glyphicon-search"></span></div>
            <input class="form-control" ng-model="search.name" ng-change="storeSearchFilter()" placeholder="search...">
        </div>
    </div>

    <div class="row container">
        <div class="list-group">
            <div class="list-group-item" ng-show="canCreateGroup()">
                <div class="pull-right">
                    <span ng-show="!userHasSufficientPrivileges" uib-popover='Sign in to add a group' popover-trigger="mouseenter" class="fa helpme">&#xf128;</span>
                    <button class="btn btn-primary" ng-disabled="userWithoutAccess" ng-click="addGroup()"><span class="glyphicon glyphicon-plus"></span></button>
                </div>
                <h4>&nbsp;</h4>
            </div>
            <a ng-href="#/groups/{{group.name}}" class="list-group-item" ng-repeat="group in groups| filter:search:strict">
                <small>{{$index + 1}}</small>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
                <strong>{{group.name}}</strong>
                <div class="pull-right">
                    <span class="label label-info">topics: {{group.topics.length}}</span>
                    <span class="glyphicon glyphicon-chevron-right"></span>
                </div>
            </a>
        </div>

        <div ng-show="fetching" class="text-center">
            <h1><i class="fa fa-circle-o-notch fa-spin"></i></h1>
        </div>
    </div>
</section>
